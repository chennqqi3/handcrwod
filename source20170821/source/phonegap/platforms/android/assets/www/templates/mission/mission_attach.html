<ion-view view-title="添付ファイル" cache-view="false">
    <ion-nav-buttons side="right">
        <button menu-toggle="right" class="button button-icon icon ion-ios-plus-empty" ng-file-select="onUploadFiles($files)"></button>
    </ion-nav-buttons>
    <ion-content>
        <ion-list>
            <ion-item data-ng-repeat="attach in attaches" class="item-remove-animate item-icon-left file-attach">
                <i class="icon icon-paper-clip"></i>
                <a target="_blank" ng-href="{{attach.attach_url}}">{{attach.file_name}}</a><small>({{attach.file_size}}M)</small>
                <span class="item-note">{{ attach.create_time | date_time_label }}</span>

                <ion-option-button class="button-assertive" ng-click="remove(attach)">
                    <i class="icon ion-ios-trash-outline"></i>
                </ion-option-button>
            </ion-item>
        </ion-list>
    </ion-content>

    <div class="chat-send-files" id="file_bar" style="bottom: 0px;">
        <div class="chat-send-file" ng-repeat="file in files">
            <div class="file-info">
                {{file.name}}({{file.fileSize}}M)
            </div>
            <button class="button button-icon icon ion-close-round pull-right" ng-click="onCancelUpload(file)"></button>
            <div class="pbar">
                <div class="progress">
                  <div class="progress-bar progress-bar-striped active" role="progressbar"
                  aria-valuenow="{{file.progress}}" aria-valuemin="0" aria-valuemax="100" style="width:{{file.progress}}%">
                    {{file.progress}}% 
                  </div>
                </div>
            </div>
        </div>
    </div>    
</ion-view>